package  {		import flash.events.Event;		public class GiftingNPC extends NPC{		private var giftGiven:Boolean = false;		private var gift:Item;		private var afterSpeech:Array;		private var hangOnDisplayed:Boolean = false;		public function GiftingNPC(npcCost:int, xPos:int, yPos:int, w:int, h:int, g:Item, s:Array, s2:Array) {			super(npcCost, xPos, yPos, w, h, s);						gift = g;			afterSpeech = s2;						this.addEventListener(Event.ENTER_FRAME, giveGift);		}						function giveGift(event:Event):void{			if(hasTalkedToMe && !giftGiven){								if(_root.addInvItem(gift)){										//Remove hang on speech					if(hangOnDisplayed){						speech.pop();						speech.pop();					}										//Update speech					speech = afterSpeech;										//Prevent further calls					giftGiven = true;					this.removeEventListener(Event.ENTER_FRAME, giveGift);				}								else if(!hangOnDisplayed){					hangOnDisplayed = true;					speech.push("Oh, it seems you're full");					speech.push("I'll hang onto this for now then.");				}							}		}	}	}