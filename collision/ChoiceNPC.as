package collision {		import flash.events.*;	import inven.*;		public class ChoiceNPC extends NPC{				private var isBoxDisplayed:Boolean = false;		private var choiceBox:SelectBox;						public function ChoiceNPC(nD:NPCData, gE:GameEvent, sB:SelectBox) {			super(nD);						choiceBox = sB;			choiceBox.x = 400;			choiceBox.y = 150;						//Sets linked event			linkedEvent = gE;						addEventListener(Event.ENTER_FRAME, displayChoiceBox);		}				public function displayChoiceBox(event:Event):void{						//If done talking display box			if(!isBoxDisplayed && this.isTalkingToMe && _root.arrayIndex == _root.speechArray.length - 1 && _root.textIndex == _root.speechArray[_root.arrayIndex].length - 1){								_root.zCoolDown = 15								choiceBox.setUpTextBoxes();				_root.invLayer.addChild(choiceBox);								isBoxDisplayed = true;								_root.choiceBoxCoolDown = _root.speechArray[_root.arrayIndex].length;			}						//Records choice			else if(isBoxDisplayed && _root.zDown && _root.zCoolDown == 0 && _root.choiceBoxCoolDown == 0){								if(choiceBox.getPointerIndex() == 0){					linkedEvent.setEvent(true);				}				else if(choiceBox.getPointerIndex() == 1){					linkedEvent.setEvent(false);				}								//Remove choice box				choiceBox.resetItems();				_root.invLayer.removeChild(choiceBox);				isBoxDisplayed = false;				choiceBox.setPointerIndex(0);			}						//If event is true			if(linkedEvent.getEvent()){				this.isTalkingToMe = false;			}		}					}	}