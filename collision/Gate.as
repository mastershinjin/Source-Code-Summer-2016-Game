package collision {		import flash.events.*;	import flash.display.MovieClip;		public class Gate extends BoxCollider{		protected var coverImg:GateCover = new GateCover();		private var linkedEvent:GameEvent;		private var originalX:int;		private var isPlayingGate:Boolean;		public function Gate(xPos:int, yPos:int, w:int, h:int, gE:GameEvent) {						super(xPos, yPos, w, h);						coverImg.gotoAndStop("staticGate");						originalX = xPos;												//Sets hit box			hitBox.width = coverImg.width;			hitBox.height = 40;			hitBox.y = coverImg.height - 40;						//Adds cover image			this.addChild(coverImg);						//Links to event			linkedEvent = gE;						addEventListener(Event.ADDED, added);			addEventListener(Event.REMOVED, removed);		}		public function added(event:Event):void{						super._root = MovieClip(root);						//Adjusts layering			addEventListener(Event.ENTER_FRAME, adjustLayer);						//If already open when added, dont play			if(!linkedEvent.getEvent()){				addEventListener(Event.ENTER_FRAME, openGate);			}			else{				coverImg.gotoAndStop("gateOpen");				hitBox.width = 0;			}		}				public function removed(event:Event):void{			removeEventListener(Event.ADDED, added);			removeEventListener(Event.REMOVED, removed);			removeEventListener(Event.ENTER_FRAME, adjustLayer);		}		//Adjust the layer of the NPC with the player		public function adjustLayer(event:Event):void{			if(this.y + this.height > _root.player.y + _root.player.height){				parent.setChildIndex(this, parent.numChildren - 1);			}			else{				parent.setChildIndex(this, 0);			}		}				//Opens gate when npc is talked to		public function openGate(event:Event):void{						if(linkedEvent.getEvent() && !_root.isPlayingText && !isPlayingGate){				isPlayingGate = true;				coverImg.gotoAndPlay("movingGate");								hitBox.width = 0;							}		}	}	}