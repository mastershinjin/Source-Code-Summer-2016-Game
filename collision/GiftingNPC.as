package collision{		import flash.events.Event;	import inven.Item;			public class GiftingNPC extends NPC{		private var giftGiven:Boolean = false;		private var gift:Item;		private var afterGiftSpeech:Array;		private var hangOnDisplayed:Boolean = false;		public function GiftingNPC(nD:NPCData, g:Item) {			super(nD);						gift = g;			giftGiven = npcData.giftGiven;						afterGiftSpeech = npcData.afterGiftSpeech;						//Sets speech if gift already given			if(giftGiven){				speech = afterGiftSpeech;			}						this.addEventListener(Event.ENTER_FRAME, giveGift);		}						function giveGift(event:Event):void{						if(npcData.hasTalkedToMe && !giftGiven && isTalkingToMe){								if(_root.addInvItem(gift)){										//Remove hang on speech					if(hangOnDisplayed){						speech.pop();						speech.pop();					}										//Prevent further calls					giftGiven = true;					npcData.giftGiven = true;										this.removeEventListener(Event.ENTER_FRAME, giveGift);				}								else if(!hangOnDisplayed){					hangOnDisplayed = true;					speech.push("Oh, it seems you're full");					speech.push("I'll hang onto this for now then.");				}							}						//Resets hang on text when after text is displayed			if(!_root.isPlayingText && hangOnDisplayed){				speech.pop();				speech.pop();				hangOnDisplayed = false;			}		}	}	}